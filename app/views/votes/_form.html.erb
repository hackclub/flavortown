<%= form_with(model: @vote, url: votes_path, data: { turbo: false, action: "submit->vote-tracker#submit" }) do |form| %>
  <%= form.hidden_field :ship_event_id %>
  <%= form.hidden_field :project_id %>
  <%= form.hidden_field :time_taken_to_vote, value: 0, data: { vote_tracker_target: "timeField" } %>
  <%= form.hidden_field :repo_url_clicked, value: false, data: { vote_tracker_target: "repoField" } %>
  <%= form.hidden_field :demo_url_clicked, value: false, data: { vote_tracker_target: "demoField" } %>

  <% Vote.enabled_categories.each do |category| %>
    <%= render "category", form: form, category: category %>
  <% end %>

  <style>.votes-new__feedback .input { display: flex; width: 100%; }</style>
  <div class="votes-new__feedback" style="margin: 4rem 0;">
    <%= render InputComponent.new(
      form: form,
      attribute: :reason,
      label: "Feedback for the creator (Optional)",
      placeholder: "Share your thoughts about this project...",
      subtitle: current_user.send_votes_to_slack ? "This will be shared to Slack with your vote" : "This will be shown to the author, but anonymously",
      color: :yellow,
      as: :text_area
    ) %>
  </div>

  <%= render ButtonComponent.new(
    text: "Submit",
    icon: "icons/tick.svg",
    type: :submit,
    color: :brown,
    class: "btn-submit"
  ) %>
<% end %>
