<% content_for :title, "Get Started - Flavortown" %>

<% @hide_sidebar = true %>
<% @hide_footer = true %>

<div class="start-flow">
  <div class="start-flow__container">
    <%= render HeadingComponent.new(title: "Welcome to Flavortown", tone: :brown) %>

    <div class="start-flow__progress">
      <div class="start-flow__steps">
        <% %w[name experience project devlog signin].each_with_index do |step_name, index| %>
          <div class="start-flow__step <%= 'start-flow__step--active' if @step == step_name %> <%= 'start-flow__step--completed' if StartController::STEPS.index(@step) > index %>">
            <div class="start-flow__step-number"><%= index + 1 %></div>
            <div class="start-flow__step-label"><%= step_name.titleize %></div>
          </div>
          <% if index < 4 %>
            <div class="start-flow__step-connector <%= 'start-flow__step-connector--completed' if StartController::STEPS.index(@step) > index %>"></div>
          <% end %>
        <% end %>
      </div>
    </div>

    <% case @step %>
    <% when "name" %>
      <%= render partial: "start/step_name" %>
    <% when "experience" %>
      <%= render partial: "start/step_experience" %>
    <% when "project" %>
      <%= render partial: "start/step_project" %>
    <% when "devlog" %>
      <%= render partial: "start/step_devlog" %>
    <% when "signin" %>
      <%= render partial: "start/step_signin" %>
    <% end %>
  </div>

<% if @step == "name" %>
  <%= render DialogueBoxComponent.new(text: [
    "Hey there, chef! I'm Chef Orpheus, your guide to Flavortown.",
    "I'll walk you through how the platform works. By the end, you'll earn your first reward and feel right at home here!",
    "Ooo, looks like your first reward just unlocked! Once we finish the tutorial, I'll send you a pack of free, real stickers to your doorstep.",
    "Let's start simple. Choose a display name. This is what other chefs will see around Flavortown, and it doesn't have to be your real name."
  ], show_sticker: true) %>

<% elsif @step == "experience" %>
  <%= render DialogueBoxComponent.new(text: [
    "Nice to meet you, #{@display_name}! Now let's figure out where you're at.",
    "On Flavortown, everyone cooks at their own pace. Are you new to building projects, or do you already have ideas cooking?",
    "If you're Unseasoned, we'll help you build your first project. If you're Seasoned, you can jump straight into building your own project!",
    "Pick the path that feels right for you."
  ]) %>

<% elsif @step == "project" %>
  <% if @experience_level == "unseasoned" && @project_attrs.blank? %>
    <%= render DialogueBoxComponent.new(text: [
      "Great! Now let's create your first project.",
      "On Flavortown, everything starts with a project. It's whatever you're building or working on.",
      "I've picked out some starter projects that are perfect for beginners.",
      "Each one comes with clear instructions and a community to help you along the way.",
      "Pick whichever one sounds interesting to you! Click on a card to get started. You'll be able to customize the name and description after you pick."
    ]) %>
  <% elsif @experience_level == "unseasoned" && @project_attrs.present? %>
      <% if @starter_project_name == "Sprig" %>
        <%= render DialogueBoxComponent.new(text: [
          "Ooo, Sprig! Making games is always a blast. Excellent pick!",
          "I've filled in the project details to get you started. Tweak the name and description however you like.",
          "Once you're ready, we'll jump into your first devlog. I'm really excited to see the game you make!"
        ]) %>
      <% elsif @starter_project_name == "Boba Drops" %>
        <%= render DialogueBoxComponent.new(text: [
          "Ooo, boba! You've got great taste. Boba Drops is a fun way to learn web development.",
          "I've set up the project details for you. Change the name and description to make it yours.",
          "Next up is your first devlog. Finish it and that boba will be one step closer!"
        ]) %>
      <% elsif @starter_project_name == "Fuse Ring" %>
        <%= render DialogueBoxComponent.new(text: [
          "Fuse Ring! That's such a cool and useful idea. Love this choice.",
          "Your project details are ready to go. Feel free to tweak the name and description to match your vibe.",
          "Up next is your first devlog. I can't wait to see your design take shape!"
        ]) %>
    <% else %>
      <%= render DialogueBoxComponent.new(text: [
        "Perfect choice! I've pre-filled the project details based on what you selected.",
        "Feel free to change the name or description to make it your own. Once you're happy with it, click Next and we'll move on to creating your first devlog!",
        "Don't worry, you can always edit this later if you want to change anything."
      ]) %>
    <% end %>
  <% else %>
    <%= render DialogueBoxComponent.new(text: [
      "Great! Now let's create your first project.",
      "On Flavortown, everything starts with a project. It's whatever you're building or working on.",
      "It could be a game, an app, a website, hardware, or anything else you're making, as long as it's technical.",
      "Give it a name and a short description. Don't worry, you can always change this later!"
    ]) %>
  <% end %>

<% elsif @step == "devlog" %>
  <%= render DialogueBoxComponent.new(text: [
    "Awesome project! Now for the fun part: devlogs.",
    "Devlogs are updates where you share your progress. Think of them as mini blog posts or journals about what you're working on.",
    "At Hack Club, we believe in building in the open. Devlogs are a great way to share your journey. You can later explore other projects, read devlogs, and chat with fellow chefs along the way.",
    "Let's start with a simple devlog. I'll show you examples of great ones later, so no pressure!",
    "Add some text and at least one image or video showing what you've made so far. It can be anything for now."
  ]) %>

<% elsif @step == "signin" %>
  <%= render DialogueBoxComponent.new(text: [
    "You're almost there. Just one last step to claim your reward!",
    "Before we ship your stickers, we need your address and a quick confirmation that you're a student.",
    "You'll be taken off-site briefly to sign in or sign up with a Hack Club account. One account works for all current and future Hack Club programs!",
    "Alright, chef! See in the kitchen!"
  ]) %>
<% end %>
</div>
