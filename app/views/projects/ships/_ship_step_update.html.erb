<div class="projects-ship__step">
  <h2 class="projects-ship__section-title">Write Your Ship Message</h2>
  <p class="projects-ship__section-desc">
    This is your moment! Tell the community what you built and what you learned.
  </p>

  <%= form_with(url: project_ships_path(@project), method: :post, id: "ship-form", local: true) do |form| %>
    <%= render InputComponent.new(
          label: "Ship message",
          placeholder: "I built a thing that does X! The hardest part was Y, but I figured it out by Z. Really happy with how it turned out :)",
          form: form,
          attribute: :ship_update,
          color: :yellow,
          subtitle: "What did you make? What was challenging? What are you proud of?",
          as: :text_area,
          input_html: { rows: 6 }
        ) %>

    <% @active_sidequests.each do |sidequest| %>
      <% auto_checked = sidequest.slug == "challenger" && @project.space_themed? %>
      <div class="input input--blue">
        <span class="input__label">Sidequest</span>
        <label class="projects-new__checkbox-control projects-new__checkbox-control--compact">
          <input type="checkbox" name="sidequest_ids[]" value="<%= sidequest.id %>" <%= 'checked' if @project.sidequests.include?(sidequest) || auto_checked %>>
          <span class="projects-new__checkbox-label"><%= sidequest.title %></span>
        </label>
        <% if sidequest.description.present? %>
          <div class="input__subtitle"><%= sidequest.description %></div>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>
