<% content_for :title, "Leaderboard - Flavortown" %>

<% content_for :head do %>
  <meta property="og:title" content="Flavortown Leaderboard">
  <meta property="og:description" content="See who's earning the most cookies on Flavortown!">
  <meta property="og:url" content="<%= request.original_url %>">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Flavortown Leaderboard">
  <meta name="twitter:description" content="See who's earning the most cookies on Flavortown!">
<% end %>

<%= content_for :stylesheets do %>
  <%= stylesheet_link_tag "leaderboard", "data-turbo-track": "reload" %>
<% end %>

<main>
    <h1>Leaderboard</h1>
    <p class="subtitle"><%= @pagy.count %> users opted in to the leaderboard :D, you can opt in through settings</p>

    <div class="users">
        <% @users.each_with_index do |user, index| %>
            <div class="user">
                <div class="content">
                    <h2>#<%= @pagy.offset + index + 1 %></h2>

                    <%= image_tag user.avatar %>
                    <h2>
                        <%= link_to user.display_name, user_path(user) %>
                    </h2>

                    <p><%= user.cached_balance %> ğŸª</p>
                </div>
            </div>
        <% end %>
    </div>

    <% if @pagy.pages > 1 %>
        <div class="pagination"><%== @pagy.series_nav %></div>
    <% end %>
</main>
