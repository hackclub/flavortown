<% content_for :title, "Project ##{@project.id}" %>
<h1>Project #<%= @project.id %></h1>

<% if @project.deleted? %>
  <div class="alert alert-warning" style="margin-bottom: 1.5rem; padding: 1rem; background: #fee2e2; border-radius: 8px; border: 1px solid #dc2626; color: hsl(7, 40%, 25%);">
    <strong>⚠️ This project was deleted at <%= @project.deleted_at.strftime("%Y-%m-%d %H:%M") %></strong>
  </div>
<% end %>

<div class="flex" style="gap: 1rem; flex-wrap: wrap;">
  <div class="card">
    <h2>Details</h2>
    <div class="info-rows">
      <div><b>Title:</b> <%= @project.title %></div>
      <div><b>Description:</b> <%= @project.description.presence || "None" %></div>
      <div><b>Ship Status:</b> <%= @project.ship_status.titleize %></div>
      <div><b>Type:</b> <%= @project.project_type.presence || "Not set" %></div>
      <div><b>Created:</b> <%= @project.created_at.strftime("%Y-%m-%d") %></div>
      <div><b>Status:</b> <%= @project.deleted? ? "Deleted" : "Active" %></div>
      <% if @project.repo_url.present? %>
        <div><b>Repo:</b> <%= safe(@project.repo_url, "Repo") %></div>
      <% end %>
      <% if @project.demo_url.present? %>
        <div><b>Demo:</b> <%= safe(@project.demo_url, "Demo") %></div>
      <% end %>
    </div>
  </div>

  <div class="card">
    <h2>Members</h2>
    <% if @project.users.any? %>
      <ul style="margin: 0; padding-left: 1.25rem;">
        <% @project.users.each do |u| %>
          <li><%= link_to u.display_name, helper_user_path(u) %></li>
        <% end %>
      </ul>
    <% else %>
      <p>No members.</p>
    <% end %>
  </div>
</div>

<div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
  <%= link_to "← Back", helper_projects_path, class: "btn-secondary no-margin" %>
  <% if @project.deleted? %>
    <%= button_to "Restore Project", restore_helper_project_path(@project),
      method: :post,
      class: "btn-primary",
      form: { onsubmit: "return confirm('Are you sure you want to restore this project?')" } %>
  <% end %>
</div>
