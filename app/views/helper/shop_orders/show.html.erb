<% content_for :title, "Order ##{@order.id}" %>
<h1>Order #<%= @order.id %></h1>

<div class="flex" style="gap: 1rem; flex-wrap: wrap;">
  <div class="card">
    <h2>Order Details</h2>
    <div class="info-rows">
      <div><b>Status:</b> <span class="badge badge-<%= @order.aasm_state %>"><%= @order.aasm_state.titleize %></span></div>
      <div><b>Item:</b> <%= @order.shop_item&.name || "Unknown" %></div>
      <div><b>Quantity:</b> <%= @order.quantity %></div>
      <div><b>Cost:</b> <%= @order.frozen_item_price %> tickets each (<%= @order.total_cost %> total)</div>
      <div><b>Ordered:</b> <%= @order.created_at.strftime("%Y-%m-%d %H:%M") %></div>
      <% if @order.fulfilled_at %>
        <div><b>Fulfilled:</b> <%= @order.fulfilled_at.strftime("%Y-%m-%d %H:%M") %></div>
      <% end %>
      <% if @order.rejection_reason.present? %>
        <div><b>Rejection Reason:</b> <%= @order.rejection_reason %></div>
      <% end %>
    </div>
  </div>

  <div class="card">
    <h2>User</h2>
    <div class="info-rows">
      <div><b>Name:</b> <%= link_to @order.user.display_name, helper_user_path(@order.user) %></div>
      <div><b>Banned:</b> <%= @order.user.banned? ? "ðŸš« Yes" : "No" %></div>
      <div><b>Verified:</b> <%= @order.user.verification_status.titleize %></div>
    </div>
  </div>
</div>

<%= link_to "â† Back", helper_shop_orders_path, class: "btn-secondary" %>

<style>
.badge {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  display: inline-block;
}
.badge-pending { background-color: #fbbf24; color: #78350f; }
.badge-awaiting_periodical_fulfillment { background-color: #60a5fa; color: #1e3a8a; }
.badge-fulfilled { background-color: #10b981; color: white; }
.badge-rejected { background-color: #ef4444; color: white; }
.badge-on_hold { background-color: #6b7280; color: white; }
</style>
